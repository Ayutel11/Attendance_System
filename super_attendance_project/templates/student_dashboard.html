{% extends 'base.html' %}
{% block content %}
  <h1>Student Dashboard</h1>
  <div class="card">
    <h2>Profile</h2>
    <p><strong>Name:</strong> {{ student.name }}</p>
    <p><strong>Email:</strong> {{ student.email }}</p>
    <p><strong>Semester:</strong> {{ student.sem }}</p>
    <p><strong>Stream:</strong> {{ student.stream }}</p>
    <p><strong>Division:</strong> {{ student.division }}</p>
  </div>

  <div class="card">
    <h2>Your Attendance</h2>
    {% if attendance_summary %}
      <table>
        <thead>
          <tr>
            <th>Subject</th>
            <th>Total Lectures</th>
            <th>Present</th>
            <th>Absent</th>
            <th>% Present</th>
          </tr>
        </thead>
        <tbody>
          {% for row in attendance_summary %}
          <tr>
            <td>{{ row.subject }}</td>
            <td>{{ row.total }}</td>
            <td>{{ row.present }}</td>
            <td>{{ row.absent }}</td>
            <td>{{ '%.1f'|format(row.percent_present) }}%</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    {% else %}
      <p>No attendance records yet.</p>
    {% endif %}
  </div>
{% endblock %}
